# 数据类型初步使用

本节简单介绍一下 mysql 中常用的数据类型。读者应当学会在建表时，为表中的业务字段定义合适的类型，例如，创建时间、开始时间这些最好使用日期类型，入不要使用字符串；个数这种带数字概念的应当使用数值类型。

在设计表时，应该特别重视所用的数据类型。使用错误的数据类型可能会严重地影响应用程序的功能和性能。更改包含数据的列不是一件小事（而且这样做可能会导致数据丢失）。

该阶段不需太过关注字段类型对性能或内存的影响，能完成对象建模即可。

## 数值数据类型

数值数据类型存储数值。MySQL支持多种数值数据类型，每种存储的数值具有不同的取值范围。显然，支持的取值范围越大，所需存储空间越多。此外，有的数值数据类型支持使用十进制小数点（和小数），而有的则只支持整数。

| 数据类型          | 说明                                                         |
| ----------------- | ------------------------------------------------------------ |
| BIT               | 位字段，1～64位。（在MySQL 5之前，BIT在功能上等价于TINYINT   |
| BIGINT            | 整数值，支持-9223372036854775808～9223372036854775807（如果是UNSIGNED，为0～18446744073709551615）的数 |
| BOOLEAN（或BOOL） | 布尔标志，或者为0或者为1，主要用于开/关（on/off）标志        |
| DECIMAL（或DEC    | 精度可变的浮点值                                             |
| DOUBLE            | 双精度浮点值                                                 |
| FLOAT             | 单精度浮点值                                                 |
| INT（或INTEGER）  | 整数值，支持-2147483648～2147483647（如果是UNSIGNED， 为0～4294967295）的数 |
| MEDIUMINT         | 整数值，支持-8388608～8388607（如果是UNSIGNED，为0～16777215）的数 |
| REAL              | 4字节的浮点值                                                |
| SMALLINT          | 整数值，支持-32768～32767（如果是UNSIGNED，为0～65535）的数  |
| TINYINT           | 整数值，支持-128～127（如果为UNSIGNED，为0～255）的数        |

### 有符号与无符号数

所有数值数据类型（除BIT和BOOLEAN外）都可以有符号或无符号。有符号数值列可以存储正或负的数值，无符号数值列只能存储正数。默认情况为有符号，但如果你知道自己不需要存储负值，可以使用UNSIGNED关键字，这样做将允许你存储两倍大小的值。

## 串数据类型

最常用的数据类型是串数据类型。它们存储串，如名字、地址、电话号码、邮政编码等。有两种基本的串类型，分别为定长串和变长串。

定长串接受长度固定的字符串，其长度是在创建表时指定的。例如，名字列可允许30个字符，而社会安全号列允许11个字符（允许的字符数目中包括两个破折号）。定长列不允许多于指定的字符数目。它们分配的存储空间与指定的一样多。因此，如果串Ben存储到30个字符的名字字段，则存储的是30个字符，CHAR属于定长串类型。

变长串存储可变长度的文本。有些变长数据类型具有最大的定长，而有些则是完全变长的。不管是哪种，只有指定的数据得到保存（额外的数据不保存）TEXT属于变长串类型。varchar也属于变长类型。

既然变长数据类型这样灵活，为什么还要使用定长数据类型？回答是因为性能。MySQL处理定长列远比处理变长列快得多。

| 数据类型   | 说明                                                         |
| ---------- | ------------------------------------------------------------ |
| CHAR       | 1～255个字符的定长串。它的长度必须在创建时指定，否则MySQL假定为CHAR(1) |
| ENUM       | 接受最多64 K个串组成的一个预定义集合的某个串                 |
| LONGTEXT   | 与TEXT相同，但最大长度为4 GB                                 |
| MEDIUMTEXT | 与TEXT相同，但最大长度为16 K                                 |
| SET        | 接受最多64个串组成的一个预定义集合的零个或多个串             |
| TEXT       | 最大长度为64 K的变长文本                                     |
| TINYTEXT   | 与TEXT相同，但最大长度为255字节                              |
| VARCHAR    | 长度可变，最多不超过255字节。如果在创建时指定为VARCHAR(n)，则可存储0到n个字符的变长串（其中n≤255） |

### 何时用字符串不用数值

你可能会认为电话号码和邮政编码应该存储在数值字段中（数值字段只存储数值数据），但是，这样

做却是不可取的。如果在数值字段中存储邮政编码01234，则保存的将是数值1234，实际上丢失了一位数字。

需要遵守的基本规则是：如果数值是计算（求和、平均等）中使用的数值，则应该存储在数值数据类型列中。如果作为字符串（可能只包含数字）使用，则应该保存在串数据类型列中。

## 日期与时间

MySQL使用专门的数据类型来存储日期和时间值

| 数据类型  | 说明                                                         |
| --------- | ------------------------------------------------------------ |
| DATE      | 表示1000-01-01～9999-12-31的日期，格式为YYYY-MM-DD           |
| DATETIME  | DATE和TIME的组合                                             |
| TIMESTAMP | 功能和DATETIME相同（但范围较小）                             |
| TIME      | 格式为HH:MM:SS                                               |
| YEAR      | 用2位数字表示，范围是70（1970年）～69（2069年），用4位数字表示，范围是1901年～2155年 |

## 二进制数据类型

二进制数据类型可存储任何数据（甚至包括二进制信息），如图像、多媒体、字处理文档等。

| 数据类型   | 说明                  |
| ---------- | --------------------- |
| BLOB       | Blob最大长度为64 KB   |
| MEDIUMBLOB | Blob最大长度为16 MB   |
| LONGBLOB   | Blob最大长度为4 GB    |
| TINYBLOB   | Blob最大长度为255字节 |

